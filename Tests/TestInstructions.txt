********* 
עריכה - טסטים שאנחנו לא צריכים לעבור שמצורפים בלינקים שלי :
tests5.scm - 2016tests
**********

אהלן אנשים , החלטתי מראש ליצור לעצמי סביבת טסטים נורמלית , ואני משתף אותה גם איתכם. אשמח אם תעזרו להרחיב אותה ולמצוא טעויות ברגע שלכמה מאיתנו יהיו קומפיילרים שאשכרה עושים משהו .
אז אני מצרף כאן גם את הגרסא של חלילי המקורית שעליה בניתי את החבילה שלי, למקרה שמישהו מכם מעדיף לעשות משהו כזה לגמרי בעצמו או שזה יעזור לו להבין יותר איך להתאים את הקבצים לצרכים שלו. (הטסטים שלי לשנה הנוכחית נמצאים בmaorTests ,ושל חלילי בhaliliTests)

כמה דברים שצריך או כדאי לדעת בשביל להשתמש בטסטים :

1.קודם כל יש להריץ פקודת-
chmod +x ./run_tests.sh

כשמורידים בפעם הראשונה את הקבצים למחשב שלכם, כדי שהקובץ shell ירוץ . אם אתם עומדים בכל ההנחות של הסעיף הבא , כל מה שאתם צריכים לעשות עכשיו ברגע שיש לכם קומפיילר שאפשר לבדוק אותו , זה להריץ את הקובץ .sh 
זה פשוט יריץ את כל הטסטים בALLTests(משהו כמו 300+ טסטים)

2.הshell החדש שנבנה על גבי זה של חלילי, מניח כמה דברים :

- יש תיקיית פרוייקט, שבה נמצא הקומפיילר שלכם, בשם project .היא גם מכילה בתוכה את המייקפייל שלכם בשם Makefile ולא makefile . 
-הshell מריץ את המייקפייל שלכם מבחוץ ולכן יש לתמוך בכך במייקפייל, תראו את הטיפ שרשמתי בסוף הפוסט הקודם שלי לגבי זה. זה כולה קצת התעסקות עם loadים מתוך המייקפייל. 
-יש תיקיית AllTests ובתוכה יש את כל התיקיות test-suite שבא לכם להריץ . 
-כל תיקיית test-suite (כמו ה4 שחלילי סיפק מ2013-2016) מכילה בתוכה תיקיית tests שבתוכה נמצא הקובץ input שאותו נשווה בין הקומפיילר שלנו לבין סקים , כמו בבדיקות של הסגל. 
-יש גם תיקיית sol בכל test-suite אבל היא אופציונלית לחלוטין , החבר'ה של שנה שעברה כנראה הניחו שיותר נוח להם לייצר את הexpected מראש במקום מתוך סקים. לרוב הטסטים גם כך אין קובץ expected מובנה . אני עדיין לא יודע אם זה יהיה נוח או לא ולכן תמכתי בכך גם בshell שלי , אבל לא יקרה כלום אם תעיפו אותם .
אם זה אפילו ממש מפריע לכם , פשוט תעיפו מתוך הsh. את הif בשורה 27 ותריצו רק מה שבתוך הelse במקום .

3. מה קורה בכל טסט? הshell שלי מייבא העתק של הקובץ input לתוך התיקייה שהוא נמצא בה ומקמפל אותו לexe באותו מקום , ואז מיד מוחק את כל ארבעת הקבצים שנוצרו במהלך הטסט (העתק input, אסמבלי,אובייקט וexe) לאחר שהוא משווה בין הactual לexpected .

4. כמה הטסטים אמינים ? בדקתי אותם בשלב כל כך מוקדם כשאני משווה את הexpected של הטסט בסקים עם עצמו , רק בשביל לבדוק שהטסטים בכלל עוברים ,שהשוואה באמת מתבצעת ( בדקתי גם מצב של תוצאות שונות hard-coded) ושהקומפיילר שלי מייצר exe במהלך הטסט . 
יצא לי שכולם חוץ מאחד ב2016 עובדים בסקים באמת. 
אז זאת רמת האמינות שלהם כרגע. 
אשמח לשמוע מה קורה כשיהיו כבר קומפיילרים שעושים משהו ואפשר לבדוק אותם .

~בבקשה תשאלו שאלות לגבי הטסטים כאן בתגובות ולא בפרטי~ 
בהצלחה ומסך ירקרק לכולם!